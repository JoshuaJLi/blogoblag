<!doctype html>
<html>
<body>
  Round: <div id="round">0</div><br>
  Stitch: <input id="stitch" type="number" value="0">


  <div id="count">0</div>

  <script>
    let c = 0;
    let r = 0;

    const countEl = document.getElementById("count");
    const roundEl = document.getElementById("round");
    const stitchEl = document.getElementById("stitch");

    function parseStitch() {
      const v = parseInt(stitchEl.value, 10);
      return Number.isFinite(v) && v > 0 ? v : 0;
    }

    // keep displayed values in sync initially
    countEl.textContent = c;
    roundEl.textContent = r;

    document.addEventListener("keydown", e => {
      if (e.code === "Space") {
        // if the stitch input is focused, ignore space to allow normal typing there
        if (document.activeElement === stitchEl) return;
        e.preventDefault();
        c++;
        const stitchCount = parseStitch();
        if (stitchCount > 0 && c >= stitchCount) {
          // reached a full round
          r++;
          c = 0;
          roundEl.textContent = r;
        }
        countEl.textContent = c;
      }

      if (e.code == "Backspace") {
        // If the stitch input is focused, allow normal Backspace behaviour there
        if (document.activeElement === stitchEl) {
          return;
        }
        e.preventDefault();
        if (c > 0) {
          c--;
        } else {
          // if count is already 0, allow backing up a round (optional behavior)
          const stitchCount = parseStitch();
          if (r > 0 && stitchCount > 0) {
            r--;
            c = stitchCount - 1;
            roundEl.textContent = r;
          }
        }
        countEl.textContent = c;
      }
    });
  </script>
</body>
</html>
